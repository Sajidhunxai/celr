(()=>{"use strict";jQuery(document).ready((function(){const t=jQuery,{ajaxurl:e,nonce:n,strings:o}=devnet_pph_pa_script,a={processing:!1,productType:"simple",isVariation:!1};const c=t("form.pph-price-alert-form"),i=t(".pph-pa-form-wrapper");function s(){i.removeClass("pph-modal-open").hide()}t(".pph-pa-btn").on("click",(function(e){e.preventDefault(),function(e){const n='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',o=e.find(n)[0],a=e.find(n),c=a[a.length-1];setTimeout((()=>{o.focus()}),0),t(document).on("keydown",(function(t){("Tab"===t.key||9===t.keyCode)&&(t.shiftKey?document.activeElement===o&&(c.focus(),t.preventDefault()):document.activeElement===c&&(o.focus(),t.preventDefault()))}))}(c),i.addClass("pph-modal-open").show()})),t(".pph-pa-close").on("click",(function(t){t.preventDefault(),s()})),i.on("mousedown touchstart",(function(t){t.target===this&&s()})),t(document).on("keydown",(function(t){"Escape"===t.key&&s()})),c.on("submit",(async function(o){if(o.preventDefault(),a.processing)return!1;a.processing=!0;const c=t(this).serializeArray().reduce(((t,e)=>(t[e.name]=e.value,t)),{});t(this).find("button").prop("disabled",!0);const i=await async function(){let o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get";if(!a)return!1;try{o=await t.ajax({type:i,url:e,data:{action:a,args:c,security:n}})}catch(t){console.error("ERROR: ",t)}return o}("pph_user_subscribe",{formData:c},"post");["created","updated"].includes(i)&&(t(this).append('<div class="pph-success-animation">\n\t\t<svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none" /><path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" /></svg>\n\t\t</div>'),t(this).addClass("submitted")),t(this).find("button").prop("disabled",!1),a.processing=!0})),t(document).on("found_variation","form.cart",(function(e,n){const o=n.variation_id;t('[name="pph_pa_product_id"]').val(o)})),t(document).on("reset_data","form.cart",(function(){const e=t(this).data("product_id"),n=t('[name="pph_pa_product_id"]');e!==n.val()&&n.val(e)}))}))})();